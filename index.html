<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>AlbaVita Beauty Studio - Tu Santuario a Domicilio</title>
    <meta name="description" content="Transformamos tu hogar en un santuario de bienestar. Descubre rituales de belleza y masajes a domicilio, sincronizados con tu ritmo de vida y con ingredientes puros de origen local.">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&family=Playfair+Display:wght@500;700&display=swap');
        :root {
            --color-background: #F7F4ED;
            --color-text: #3E2723;
            --color-primary: #E07A5F;
            --color-accent: #CD7F32;
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Montserrat', sans-serif;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-body);
            background-color: var(--color-background);
            color: var(--color-text);
            line-height: 1.7;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1IiBoZWlnaHQ9IjUiPgo8cmVjdCB3aWR0aD0iNSIgaGVpZ2h0PSI1IiBmaWxsPSIjZjdmNGVkIj48L3JlY3Q+CjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9ImNzY2FjNCIgb3BhY2l0eT0iMC..1Ij48L3JlY3Q+Cjwvc3ZnPg==');
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        section { padding: 100px 0; }
        h1, h2, h3 { font-family: var(--font-heading); font-weight: 500; line-height: 1.2; color: var(--color-text); }
        h1 { font-size: clamp(2.5rem, 8vw, 5rem); }
        h2 { font-size: 2.2rem; margin-bottom: 30px; }
        h2.section-title { text-align: center; margin-bottom: 60px; position: relative; }
        h2.section-title::after { content: ''; width: 60px; height: 2px; background: var(--color-primary); position: absolute; bottom: -15px; left: 50%; transform: translateX(-50%); }
        p { margin-bottom: 20px; max-width: 650px; }
        
        .header { position: fixed; width: 100%; padding: 15px 0; z-index: 1000; transition: background-color 0.3s ease, padding 0.3s ease; }
        .header.scrolled { background-color: rgba(247, 244, 237, 0.85); backdrop-filter: blur(10px); }
        .navbar { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-family: var(--font-heading); font-weight: 700; font-size: 1.5rem; text-decoration: none; color: var(--color-text); z-index: 1001; }
        
        .nav-toggle { display: block; border: none; background: transparent; cursor: pointer; padding: 0; z-index: 1001; }
        .nav-toggle .hamburger { display: block; width: 28px; height: 3px; background-color: var(--color-text); position: relative; transition: transform 0.3s ease-in-out; }
        .nav-toggle .hamburger::before,
        .nav-toggle .hamburger::after { content: ''; position: absolute; left: 0; width: 100%; height: 3px; background-color: var(--color-text); transition: top 0.3s ease-in-out 0.3s, transform 0.3s ease-in-out; }
        .nav-toggle .hamburger::before { top: -8px; }
        .nav-toggle .hamburger::after { top: 8px; }

        .nav-links { position: fixed; top: 0; right: 0; width: 70%; height: 100vh; background-color: var(--color-background); padding-top: 100px; display: flex; flex-direction: column; align-items: center; gap: 25px; transform: translateX(100%); transition: transform 0.4s cubic-bezier(0.77, 0, 0.175, 1); z-index: 1000; }
        .nav-links.is-open { transform: translateX(0); }
        .nav-links a { font-size: 1.5rem; text-decoration: none; color: var(--color-text); font-weight: 600; }
        
        .nav-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.4); z-index: 999; opacity: 0; pointer-events: none; transition: opacity 0.4s ease; }
        .nav-overlay.is-open { opacity: 1; pointer-events: auto; }
        
        .nav-toggle.is-active .hamburger { background-color: transparent; }
        .nav-toggle.is-active .hamburger::before { top: 0; transform: rotate(45deg); transition: top 0.3s ease-in-out, transform 0.3s ease-in-out 0.3s; }
        .nav-toggle.is-active .hamburger::after { top: 0; transform: rotate(-45deg); transition: top 0.3s ease-in-out, transform 0.3s ease-in-out 0.3s; }
        
        .hero { height: 100vh; display: flex; align-items: center; background-image: linear-gradient(to right, rgba(247, 244, 237, 1) 25%, rgba(247, 244, 237, 0.2)), url('img/masaje-movil-reflejo.webp'); background-size: cover; background-position: 0 0, center; }
        .hero-content { max-width: 90%; margin: 0 auto; text-align: left; }
        .hero-content .subtitle { font-weight: 600; font-size: 1rem; color: var(--color-accent); letter-spacing: 1px; text-transform: uppercase; margin-top: 0; margin-bottom: 10px; }
        .hero-content p { margin: 20px 0 30px; }
        .btn { display: inline-block; padding: 12px 30px; background: var(--color-primary); color: white; text-decoration: none; border-radius: 50px; font-weight: 600; transition: all 0.3s ease; }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 4px 20px rgba(62, 39, 35, 0.25); }

        .logo, .nav-links a, #hero-subtitle, #hero-title, #hero-text, #hero-btn { opacity: 0; transform: translateY(20px); }

        #ritual-steps { background-color: #EAE6DA; }
        .steps-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 40px; text-align: center; }
        .step .icon { font-family: 'Material Symbols Outlined'; font-size: 2.5rem; color: var(--color-primary); margin-bottom: 15px; font-variation-settings: 'FILL' 0, 'wght' 300, 'GRAD' 0, 'opsz' 48; vertical-align: middle; }
        .step h3 { font-size: 1.5rem; margin-bottom: 10px; color: var(--color-text); }
        .step p { max-width: 100%; margin: 0 auto; }

        .services-grid { width: 100%; display: flex; flex-direction: column; gap: 20px; }
        .tarjeta { border-radius: 12px; position: relative; overflow: hidden; z-index: 1; color: white; width: 100%; aspect-ratio: 16 / 10; }
        .tarjeta-bg { position: absolute; inset: 0; width: 100%; height: 100%; background-size: cover; background-position: center; z-index: -1; }
        .tarjeta::before { content: ''; position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.1) 60%); }
        .tarjeta-contenido { position: absolute; inset: 0; padding: 24px; display: flex; flex-direction: column; justify-content: flex-end; }
        .tarjeta-contenido h3 { font-family: var(--font-heading); font-size: 1.5rem; line-height: 1.2; margin: 0; color: white; }
        .tarjeta-contenido p { font-family: var(--font-body); font-size: 0.9rem; line-height: 1.5; margin-top: 10px; opacity: 1; max-height: 100px; }
        
        @media (min-width: 769px) {
            .container { padding: 0 40px; }
            section { padding: 120px 0; }
            h1 { font-size: clamp(3rem, 6vw, 5rem); }
            h2 { font-size: 2.8rem; margin-bottom: 40px; }
            h2.section-title { margin-bottom: 80px; }
            .nav-toggle { display: none; }
            .nav-overlay { display: none; }
            .nav-links { position: static; height: auto; width: auto; background-color: transparent; padding-top: 0; flex-direction: row; transform: translateX(0); transition: none; }
            .nav-links a { font-size: 1rem; }
            .header { padding: 18px 0; }
            .hero { background-image: linear-gradient(to right, rgba(247, 244, 237, 1) 30%, rgba(247, 244, 237, 0.2)), url('img/masaje-hero.webp'); background-position: 0 0, calc(50% + 200px) 20%; }
            .hero-content { max-width: 50%; margin: 0; text-align: left; }
            .hero-content .subtitle { margin-top: 70px; margin-bottom: 5px; }
            .hero-content p { margin: 30px 0; }

            .services-grid { display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(3, 1fr); gap: 1%; aspect-ratio: 1.6 / 1; filter: url(#gooey); }
            .tarjeta { aspect-ratio: auto; border-radius: 0.8vw; cursor: pointer; }
            .tarjeta-contenido { padding: 1.5vw; }
            .tarjeta-contenido h3 { font-size: clamp(1rem, 1.5vw, 1.8rem); }
            .tarjeta-contenido p { font-size: clamp(0.7rem, 0.8vw, 0.9rem); margin-top: 0.5vw; opacity: 0; max-height: 0; transform: translateY(10px); transition: opacity 0.3s ease-out, max-height 0.3s ease-out, transform 0.3s ease-out; }
            .tarjeta.atenuado { opacity: 0.45; filter: grayscale(50%); z-index: 1; }
            .tarjeta.activo { transform: scale(1.02); box-shadow: 0 0.5vw 1.5vw rgba(0,0,0,0.2); z-index: 10; }
            .tarjeta.activo .tarjeta-contenido p { opacity: 1; max-height: 100px; transform: translateY(0); }
            .testimonial-content blockquote { font-size: 2rem; }
        }

        #testimonial { background-color: #EAE6DA; color: var(--color-text); text-align: center; }
        .testimonial-slider { max-width: 800px; margin: 0 auto; position: relative; padding: 0 40px; }
        .testimonial-slide { padding: 20px; opacity: 0.5; transition: opacity 0.4s ease; position: relative; z-index: 1; }
        .testimonial-slide.swiper-slide-active { opacity: 1; }
        .quote-mark { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: clamp(8rem, 15vw, 12rem); font-family: var(--font-heading); color: var(--color-primary); opacity: 0.1; z-index: -1; line-height: 1; }
        .testimonial-slide blockquote { font-family: var(--font-heading); font-size: clamp(1.2rem, 2.5vw, 1.8rem); line-height: 1.5; margin: 0 auto 25px; font-style: italic; color: var(--color-text); }
        .testimonial-divider { width: 50px; height: 1px; background-color: var(--color-primary); border: none; margin: 0 auto 25px; }
        .testimonial-slide cite { font-family: var(--font-body); font-weight: 600; font-style: normal; font-size: clamp(0.9rem, 1.5vw, 1rem); color: var(--color-text); }
        .swiper-button-prev, .swiper-button-next { color: var(--color-text); opacity: 0.3; transition: opacity 0.3s ease; }
        .swiper-button-prev:hover, .swiper-button-next:hover { opacity: 0.8; }

        .footer { background-color: var(--color-text); color: var(--color-background); text-align: center; padding: 100px 0; }
        .footer h2 { color: var(--color-background); font-size: 2.5rem; }
        .footer p { max-width: 500px; margin-left: auto; margin-right: auto; opacity: 0.8; font-size: 1rem; }
        .footer .btn { margin-top: 20px; margin-bottom: 40px; }
        .contact-details { margin-bottom: 30px; }
        .contact-details p { margin-bottom: 10px; opacity: 0.6; font-size: 0.9rem; }
        .contact-details a { color: var(--color-background); text-decoration: none; font-weight: 600; margin: 0 10px; }
        .social-links a { color: var(--color-background); font-size: 1.8rem; margin: 0 15px; opacity: 0.7; transition: opacity 0.3s ease, color 0.3s ease; }
        .social-links a:hover { color: var(--color-primary); opacity: 1; }
        .copyright {
            font-size: 0.9rem;
            opacity: 0.6;
            margin-top: 30px; /* <-- MODIFICADO */
            margin-bottom: 0;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container"><nav class="navbar"><a href="#" class="logo">AlbaVita</a><button class="nav-toggle" aria-label="Abrir menú"><span class="hamburger"></span></button><div class="nav-links"><a href="#ritual-steps">El Ritual</a><a href="#services">Servicios</a><a href="#testimonial">Testimonios</a><a href="#contact">Contacto</a></div></nav></div>
        <div class="nav-overlay"></div>
    </header>

    <section class="hero" id="home">
        <div class="container"><div class="hero-content"><p class="subtitle" id="hero-subtitle">TU RITUAL. TU ESPACIO.</p><h1 id="hero-title">Tu Santuario Personal. Entregado.</h1><p id="hero-text">Transformamos un espacio de tu hogar en un oasis de calma. Rituales de belleza y bienestar sincronizados con tu ritmo de vida, utilizando ingredientes puros de origen local. Tu pausa, a tu manera.</p><a href="#ritual-steps" class="btn" id="hero-btn">Descubre tu Ritual</a></div></div>
    </section>

    <section id="ritual-steps">
        <div class="container"><h2 class="section-title">Tu Ritual en 3 Pasos</h2><div class="steps-container"><div class="step"><span class="icon">sync</span><h3>1. Sincroniza</h3><p>Todo empieza contigo. A través de un breve diagnóstico, adaptamos cada ritual a tu ciclo, tu energía y tus necesidades del momento.</p></div><div class="step"><span class="icon">home_health</span><h3>2. Transforma</h3><p>Llegamos con nuestro Kit Santuario. Aromas, sonidos y texturas que convierten tu espacio en un refugio de paz antes de que el tratamiento comience.</p></div><div class="step"><span class="icon">graphic_eq</span><h3>3. Continúa</h3><p>El bienestar perdura. Después de tu sesión, recibirás una guía post-ritual personalizada para prolongar la sensación de calma y equilibrio en tu día a día.</p></div></div></div>
    </section>

    <section id="services">
        <div class="container"><h2 class="section-title">Nuestros Rituales de Belleza</h2><div class="services-grid"><div class="tarjeta" data-id="1"><div class="tarjeta-bg" style="background-image: url('img/mascarilla-nutritiva.webp');"></div><div class="tarjeta-contenido"><h3>Ritual Facial Iluminador</h3><p>Un velo de ingredientes activos y arcillas locales que purifica, hidrata y devuelve la vitalidad a tu rostro. Finalizamos con un toque de hidrolato de rosas de cultivo ecológico para sellar la luminosidad.</p></div></div><div class="tarjeta" data-id="2"><div class="tarjeta-bg" style="background-image: url('img/limpieza-facial.jpg');"></div><div class="tarjeta-contenido"><h3>Ritual Facial Regenerativo</h3><p>Renueva tu piel desde el interior. Una limpieza meticulosa con vapor de ozono y extractos botánicos para oxigenar los poros, seguida de una mascarilla calmante de caléndula. El resultado es un lienzo facial fresco y sereno.</p></div></div><div class="tarjeta" data-id="3"><div class="tarjeta-bg" style="background-image: url('img/manicura.jpg');"></div><div class="tarjeta-contenido"><h3>Ceremonia de Manos de Seda</h3><p>Un tratamiento integral que va más allá del esmaltado. Tus manos se sumergen en un baño de sales minerales, seguido de una exfoliación con hueso de albaricoque y un masaje nutritivo con manteca de karité orgánica.</p></div></div><div class="tarjeta" data-id="4"><div class="tarjeta-bg" style="background-image: url('img/pedicura.jpg');"></div><div class="tarjeta-contenido"><h3>Ritual Podal Reconfortante</h3><p>Libera la tensión acumulada en tus pies. Una experiencia de bienestar que comienza con un baño de pies en hierbas aromáticas del Montseny, seguido de una exfoliación profunda y un masaje relajante que restaura la ligereza.</p></div></div><div class="tarjeta" data-id="5"><div class="tarjeta-bg" style="background-image: url('img/masaje-reductor.jpg');"></div><div class="tarjeta-contenido"><h3>Masaje Escultor de Silueta</h3><p>Un masaje manual intenso y preciso, diseñado para activar la circulación y el drenaje linfático. Utilizamos un potente aceite de abedul de los Pirineos para ayudar a movilizar líquidos y esculpir tu silueta de forma natural.</p></div></div><div class="tarjeta" data-id="6"><div class="tarjeta-bg" style="background-image: url('img/tratamiento-corporal.jpg');"></div><div class="tarjeta-contenido"><h3>Envoltura Corporal Renovadora</h3><p>Un ritual para renovar la piel de todo tu cuerpo. Comenzamos con una exfoliación con sal marina del Delta del Ebro, seguida de una envoltura nutritiva a base de algas y aceites esenciales que dejará tu piel increíblemente suave y revitalizada.</p></div></div></div></div>
    </section>
    
    <section id="testimonial">
        <div class="container">
            <h2 class="section-title">Historias de Bienestar</h2>
            <div class="swiper testimonial-slider">
                <div class="swiper-wrapper">
                    <div class="swiper-slide testimonial-slide"><span class="quote-mark">“</span><blockquote>“Honestamente, dudaba que pudiera relajarme en mi propio salón. Pero la forma en que AlbaVita transformó el espacio fue increíble. No fue un masaje a domicilio, fue como si un rincón de un spa de lujo apareciera mágicamente para mí.”</blockquote><hr class="testimonial-divider"><cite>— Elena Ríos, Arquitecta, 38 años. (Masaje Escultor de Silueta)</cite></div>
                    <div class="swiper-slide testimonial-slide"><span class="quote-mark">“</span><blockquote>“Lo que más me impresionó fue el diagnóstico previo. Mencioné que estaba en una semana de muchísimo estrés, y el ritual fue increíblemente calmante. Sentí que no era un tratamiento genérico, sino exactamente lo que necesitaba.”</blockquote><hr class="testimonial-divider"><cite>— Laura Vega, Abogada, 42 años. (Ritual Facial Regenerativo)</cite></div>
                    <div class="swiper-slide testimonial-slide"><span class="quote-mark">“</span><blockquote>“Soy muy selectiva con los productos. Me encantó que me explicaran que el aceite era de una pequeña almazara local. Se puede sentir la pureza y la calidad de los ingredientes. Mi piel nunca había estado tan suave.”</blockquote><hr class="testimonial-divider"><cite>— Sofía Navarro, Chef, 31 años. (Envoltura Corporal Renovadora)</cite></div>
                    <div class="swiper-slide testimonial-slide"><span class="quote-mark">“</span><blockquote>“El ritual no terminó cuando se fue. Recibir después el email con la playlist y una recomendación de una infusión fue un detalle que me conquistó. Demuestra un nivel de cuidado que va mucho más allá de lo habitual.”</blockquote><hr class="testimonial-divider"><cite>— Isabel Jiménez, Consultora de Marketing, 45 años. (Ritual Podal Reconfortante)</cite></div>
                    <div class="swiper-slide testimonial-slide"><span class="quote-mark">“</span><blockquote>“Mi marido me regaló una sesión por nuestro 30 aniversario. La terapeuta creó un ambiente tan especial en nuestro propio hogar que se sintió como una escapada romántica. Fue más que un regalo, fue un recuerdo precioso.”</blockquote><hr class="testimonial-divider"><cite>— Carmen Ferrer, Jubilada, 62 años. (Ritual Facial Iluminador)</cite></div>
                </div>
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
            </div>
        </div>
    </section>

    <footer class="footer" id="contact">
        <div class="container">
            <h2>Tu Santuario te Espera.</h2>
            <p>Dar el primer paso es el ritual más importante. Estoy aquí para responder tus preguntas y ayudarte a personalizar tu experiencia.</p>
            <a href="mailto:hola@albavita.com" class="btn">Agendar mi Ritual</a>
            <div class="contact-details">
                <p>O contáctame directamente:</p>
                <a href="tel:+34600123456">600 123 456</a> | <a href="mailto:hola@albavita.com">hola@albavita.com</a>
            </div>
            <div class="social-links">
                <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
            </div>
            <p class="copyright">&copy; 2025 AlbaVita Beauty Studio.</p>
        </div>
    </footer>

    <svg style="position:absolute; width:0; height:0;">
      <defs>
        <filter id="gooey">
          <feGaussianBlur in="SourceGraphic" stdDeviation="5" result="blur" />
          <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 2 -10" result="goo" />
          <feBlend in="SourceGraphic" in2="goo" />
        </filter>
      </defs>
    </svg>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Flip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    
    <script>
        gsap.registerPlugin(ScrollTrigger, ScrollToPlugin, Flip);

        const tl = gsap.timeline({defaults: {ease: "power3.out"}});
        tl.to('.logo', {opacity: 1, y: 0, duration: 0.8, delay: 0.3}).to('.nav-links a', {opacity: 1, y: 0, duration: 0.6, stagger: 0.05}, "-=0.6").to('#hero-subtitle', {opacity: 1, y: 0, duration: 0.8}, "-=0.6").to('#hero-title', {opacity: 1, y: 0, duration: 1}, "-=0.6").to('#hero-text', {opacity: 1, y: 0, duration: 1}, "-=0.8").to('#hero-btn', {opacity: 1, y: 0, duration: 1}, "-=0.8");
          
        const header = document.querySelector('.header');
        window.addEventListener('scroll', () => { header.classList.toggle('scrolled', window.scrollY > 50); });
        let isAnimatingScroll = false;
        function goToSection(e) { if (isAnimatingScroll) { e.preventDefault(); return; } if (window.scrollY === 0 && e.deltaY > 0) { e.preventDefault(); isAnimatingScroll = true; gsap.to(window, { duration: 1.5, scrollTo: "#services", ease: "power2.inOut", onComplete: () => { isAnimatingScroll = false; } }); } }
        window.addEventListener('wheel', goToSection, { passive: false });
        
        document.addEventListener('DOMContentLoaded', () => {
            const navToggle = document.querySelector('.nav-toggle');
            const navLinks = document.querySelector('.nav-links');
            const navOverlay = document.querySelector('.nav-overlay');
            function toggleMenu() { navToggle.classList.toggle('is-active'); navLinks.classList.toggle('is-open'); navOverlay.classList.toggle('is-open'); }
            navToggle.addEventListener('click', toggleMenu);
            navOverlay.addEventListener('click', toggleMenu);
            navLinks.querySelectorAll('a').forEach(link => { link.addEventListener('click', toggleMenu); });

            const mm = gsap.matchMedia();
            mm.add("(min-width: 769px)", () => {
                const tarjetas = gsap.utils.toArray('.services-grid .tarjeta');
                const configuraciones = {
                    predeterminado: { 1: '1/1/3/2', 2: '1/2/3/4', 3: '1/4/2/5', 4: '2/4/3/5', 5: '3/1/4/2', 6: '3/2/4/5' },
                    hover1: { 1: '1/1/3/3', 2: '1/3/3/4', 3: '1/4/2/5', 4: '2/4/3/5', 5: '3/1/4/3', 6: '3/3/4/5' },
                    hover2: { 1: '1/1/3/2', 2: '1/2/3/4', 3: '1/4/2/5', 4: '2/4/3/5', 5: '3/1/4/2', 6: '3/2/4/5' },
                    hover3: { 1: '1/1/3/2', 2: '1/2/3/3', 3: '1/3/3/5', 4: '3/4/4/5', 5: '3/1/4/2', 6: '3/2/4/4' },
                    hover4: { 1: '1/1/3/2', 2: '1/2/2/4', 3: '1/4/2/5', 4: '2/3/4/5', 5: '3/1/4/2', 6: '2/2/4/3' },
                    hover5: { 1: '1/1/2/2', 2: '1/2/2/4', 3: '1/4/2/5', 4: '2/3/3/5', 5: '2/1/4/3', 6: '3/3/4/5' },
                    hover6: { 1: '1/1/3/2', 2: '1/2/2/4', 3: '1/4/2/5', 4: '2/4/4/5', 5: '3/1/4/2', 6: '2/2/4/4' }
                };
                let estadoActivo = 'predeterminado';
                function aplicarConfiguracion(configKey, animate = true) {
                    const state = Flip.getState(tarjetas);
                    const config = configuraciones[configKey];
                    tarjetas.forEach(tarjeta => {
                        const id = tarjeta.dataset.id;
                        tarjeta.style.gridArea = config[id];
                        if (configKey === 'predeterminado') {
                            tarjeta.classList.remove('activo', 'atenuado');
                        } else {
                            const idTarjetaActiva = configKey.replace('hover', '');
                            tarjeta.classList.toggle('activo', id === idTarjetaActiva);
                            tarjeta.classList.toggle('atenuado', id !== idTarjetaActiva);
                        }
                    });
                    if (animate) {
                        Flip.from(state, { duration: 0.7, ease: "power3.inOut", stagger: 0.05, absolute: true });
                    }
                    estadoActivo = configKey;
                }
                aplicarConfiguracion('predeterminado', false);
                tarjetas.forEach(tarjeta => {
                    tarjeta.addEventListener('click', () => {
                        const proximoEstado = `hover${tarjeta.dataset.id}`;
                        aplicarConfiguracion(estadoActivo === proximoEstado ? 'predeterminado' : proximoEstado);
                    });
                });
                document.addEventListener('click', (e) => {
                    if (estadoActivo === 'predeterminado' || e.target.closest('.services-grid')) return;
                    aplicarConfiguracion('predeterminado');
                });
            });
            
            const swiper = new Swiper('.testimonial-slider', {
                effect: 'fade',
                fadeEffect: { crossFade: true },
                speed: 1500,
                loop: true,
                autoplay: { delay: 7000, disableOnInteraction: true },
                navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
            });
        });
    </script>
</body>
</html>
